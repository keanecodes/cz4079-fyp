{"version":3,"sources":["data/recoil.js","layouts/common/Map.js","layouts/mobile/FilterPills.js","layouts/desktop/FilterOption.js","components/CheckBox.js","components/Radio.js","layouts/desktop/FilterModal.js","layouts/desktop/FilterBar.js","components/Slider.js","layouts/desktop/Timeline.js","layouts/mobile/TabBar.js","components/TabDrawer.js","layouts/desktop/DrawerDataPoint.js","layouts/desktop/DrawerStatistics.js","pages/App.js","components/BackDrop.js","data/resale1990_2020onwards.csv","data/borders.geojson","pages/InitApp.js","index.js"],"names":["DEFAULT_LAYER","resaleData","atom","key","default","borderData","modalControls","attributes","checkbox","layers","radio","layerSelection","overlaySelection","UIdrawerStatOpen","UIdrawerDataPointOpen","UILoading","UITxtLoading","INITIAL_VIEW_STATE","latitude","longitude","zoom","pitch","bearing","getTooltip","object","date","Date","timestamp","resale_price","toString","replace","floor_area_sqm","getUTCFullYear","getUTCMonth","dataFilter","DataFilterExtension","filterSize","fp64","Map","show3D","filterValue","mapStyle","MAP_STYLE","setLoading","useSetRecoilState","setTxtLoading","useState","loaded","setLoaded","glContext","setGLContext","deckRef","useRef","mapRef","data","useRecoilValue","layerSel","prevLayer","setPrevLayer","onMapLoad","useCallback","map","current","getMap","deck","addLayer","MapboxLayer","id","commonAttributes","radiusMinPixels","getPosition","d","getRadius","timelineAttributes","opacity","getFilterValue","filterRange","filterSoftRange","extensions","layerAttributes","radiusPixels","getWeight","radiusScale","wrapLongitude","getFillColor","r","Math","sqrt","max","pickable","extruded","elevationScale","radius","coverage","lowerPercentile","getElevationWeight","elevationAggregation","transitions","ScatterplotLayer","HeatmapLayer","HexagonLayer","getLayer","removeLayer","ref","onWebGLInitialized","initialViewState","controller","glOptions","stencil","gl","preventStyleDiffing","attributionControl","mapboxApiAccessToken","process","onLoad","FilterPills","classes","useStyles","className","root","pill","makeStyles","width","display","padding","backgroundColor","position","flex","borderRadius","border","height","margin","FilterOption","name","control","flexDirection","borderTop","color","fontWeight","fontSize","letterSpacing","transition","marginTop","borderStyle","outlineColor","outline","CheckBox","props","Checkbox","disableRipple","checkedIcon","clsx","icon","inputProps","boxShadow","backgroundImage","outlineOffset","background","content","RadioButton","Radio","FilterModal","React","open","setOpen","Button","onClick","startIcon","button","Modal","aria-labelledby","aria-describedby","modal","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","paper","title","group","closePanel","FilterGroup","useRecoilState","controls","setControls","layer","setLayer","overlay","setOverlay","handleLayer","e","target","value","handleChange","type","checked","olyrs","push","fOLyrs","filter","val","RadioGroup","Object","keys","lbl","FormControlLabel","onChange","label","FormGroup","textAlign","marginLeft","marginBottom","cursor","alignItems","justifyContent","minHeight","minWidth","overflowY","textTransform","right","bottom","FilterBar","logo","filters","gridTemplateColumns","iOSBoxShadow","IOSSlider","withStyles","thumb","active","valueLabel","left","top","track","rail","mark","markActive","Slider","Timeline","min","isPlaying","setIsPlaying","animation","useEffect","cancelAnimationFrame","span","nextValueMin","MS_PER_DAY","requestAnimationFrame","isButtonEnabled","variant","disabled","getAriaValueText","valuetext","timeline","event","newValue","valueLabelDisplay","valueLabelFormat","formatLabel","overflow","zIndex","t","TabBar","item","pull","TabDrawer","state","anchor","triggerTagLocation","triggerName","triggerHeight","triggerWidth","styleSeparator","styleTrigger","children","drawer","flexShrink","drawerPaper","drawerContainer","separator","drawerTrigger","transformOrigin","transform","userSelect","visibility","Drawer","DrawerDataPoint","style","trigger","dataCardContainer","slice","i","DataCard","dataCard","address","room","model","lRemain","SortBar","sortBar","arrow","fontSpacing","paddingBottom","verticalAlign","lineHeight","marginRight","paddingRight","fontStyle","DrawerStatistics","App","isMobile","useMediaQuery","maxWidth","orientation","setFilter","timeRange","useMemo","reduce","range","Infinity","getTimeRange","theme","backdrop","BackDrop","txtLoading","InitApp","loading","setResale","setBorder","d3","resales","then","res","row","String","block","street_name","flat_type","flat_model","remaining_lease","month","getTime","Number","borders","hist","createBrowserHistory","render","history","path","to","document","getElementById"],"mappings":"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","file":"static/js/main.2e962d92.chunk.js","sourcesContent":["import { atom } from 'recoil'\n\nexport const DEFAULT_LAYER = 'scatter'\n\nexport const resaleData = atom({\n  key: 'resaleData',\n  default: null\n})\n\nexport const borderData = atom({\n  key: 'borderData',\n  default: null\n})\n\nexport const modalControls = atom({\n  key: 'modalControls',\n  default: {\n    attributes: {\n      checkbox: {\n        'Amenities': true,\n        'MRT': false,\n        'Schools': false,\n        'Parks': false,\n        'Race Ratio': false,\n        'Gender Ratio': false,\n        'Population Density': false,\n      }\n    }, \n    layers: {\n      radio: {\n        'Scatter Layer (2D Only)': DEFAULT_LAYER,\n        'Heat Map (2D Only)': 'heat',\n        'Hexagon Layer (3D Only)': 'hex',\n      },\n      checkbox: {\n        'Region Border Layer (2D Only)': false,\n      }\n    }\n  }\n})\n\nexport const layerSelection = atom({\n  key: 'layerSelection',\n  default: DEFAULT_LAYER\n})\n\nexport const overlaySelection = atom({\n  key: 'overlaySelection',\n  default: []\n})\n\nexport const UIdrawerStatOpen = atom({\n  key: 'UIdrawerStatOpen',\n  default: false\n})\n\nexport const UIdrawerDataPointOpen = atom({\n  key: 'UIdrawerDataPointOpen',\n  default: false\n})\n\nexport const UILoading = atom({\n  key: 'UILoading',\n  default: true\n})\n\nexport const UITxtLoading = atom({\n  key: 'UITxtLoading',\n  default: \"Loading 100,000 Data Points...\"\n})","import React, { useRef, useState, useCallback } from \"react\";\nimport DeckGL from '@deck.gl/react';\nimport { StaticMap } from 'react-map-gl';\nimport { DataFilterExtension } from '@deck.gl/extensions';\n// import { ScatterplotLayer, GeoJsonLayer } from '@deck.gl/layers';\nimport { ScatterplotLayer } from '@deck.gl/layers';\nimport { HeatmapLayer, HexagonLayer } from '@deck.gl/aggregation-layers';\nimport { MapboxLayer } from \"@deck.gl/mapbox\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\n\nimport MAP_STYLE from \"positron.json\";\nimport { useRecoilValue, useSetRecoilState } from 'recoil'\n// import { layerSelection, overlaySelection, resaleData, borderData, DEFAULT_LAYER, UILoading, UITxtLoading} from 'data/recoil'\nimport { layerSelection, resaleData, DEFAULT_LAYER, UILoading, UITxtLoading} from 'data/recoil'\n\nconst INITIAL_VIEW_STATE = {\n  latitude: 1.3451,\n  longitude: 103.8198,\n  zoom: 11,\n  pitch: 40,\n  bearing: -10\n};\n\nfunction getTooltip({object}) {\n  const date = new Date(object?.timestamp);\n  return (\n    object &&\n    `\\\n    Resale price: S$${object.resale_price.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\")}\n    Floor area: ${object.floor_area_sqm} sqm\n    Transacted on: ${date.getUTCFullYear()}-${date.getUTCMonth() + 1}\n    `\n  );\n}\n\nconst dataFilter = new DataFilterExtension({\n  filterSize: 1,\n  fp64: false\n})\n\nexport default function Map({show3D, filterValue, mapStyle = MAP_STYLE}) {\n  const setLoading = useSetRecoilState(UILoading)\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  setTxtLoading(\"85%\")\n  const [loaded, setLoaded] = useState(false)\n  const [glContext, setGLContext] = useState();\n  const deckRef = useRef(null);\n  const mapRef = useRef(null);\n  const data = useRecoilValue(resaleData)\n  // const border = useRecoilValue(borderData)\n  const layerSel = useRecoilValue(layerSelection)\n  // const overlaySel = useRecoilValue(overlaySelection)\n  const [prevLayer, setPrevLayer] = useState(DEFAULT_LAYER)\n\n  const onMapLoad = useCallback(() => {\n    const map = mapRef.current.getMap();\n    const deck = deckRef.current.deck;\n    setLoading(false)\n    setTxtLoading(\"\")\n    setLoaded(true)\n    \n    //! Initialize an empty deck.gl layer to prevent flashing\n    map.addLayer(\n      new MapboxLayer({ id: `resaletimeline${prevLayer}`, deck }), // This id has to match the id of the deck.gl layer\n      'place_suburbs' // Optionally define id from Mapbox layer stack under which to add deck layer\n    );\n    // eslint-disable-next-line\n  }, [layerSel, setLoading, setTxtLoading]);\n\n  const commonAttributes = {\n    id: `resaletimeline${layerSel}`,\n    data,\n    radiusMinPixels: 1,\n    getPosition: d => [d.longitude, d.latitude], // getPosition: d => [d.longitude, d.latitude, -d.depth * 1000],\n    getRadius: d => d.floor_area_sqm, // getRadius: d => Math.pow(2, d.floor_area_sqm),\n  }\n\n  const timelineAttributes = {\n    opacity: 0.3,\n    getFilterValue: d => d.timestamp,\n    filterRange: [filterValue[0], filterValue[1]],\n    filterSoftRange: [\n      filterValue[0] * 0.9 + filterValue[1] * 0.1,\n      filterValue[0] * 0.1 + filterValue[1] * 0.9\n    ],\n    extensions: [dataFilter],\n  }\n\n  let layerAttributes = null\n\n  switch (layerSel) {\n    case 'heat':\n      layerAttributes = {\n        radiusPixels: 60,\n        getWeight: d => d.resale_price,\n        ...commonAttributes,\n        ...timelineAttributes,\n      }\n      break;\n    case 'scatter':\n      layerAttributes = {\n        radiusScale: 0.6,\n        wrapLongitude: true,\n        getFillColor: d => {\n          const r = Math.sqrt(Math.max(d.resale_price, 0));\n          return [255 - r * 0.3, r * 0.18, r * 0.8]; // return [255, 0, 0];\n        },\n        pickable: true,\n        ...commonAttributes,\n        ...timelineAttributes,\n      }\n      break;\n    case 'hex': \n      layerAttributes = {\n        extruded: true,\n        elevationScale: 10,\n        opacity: 0.8,\n        radius: 509,\n        coverage: 0.88,\n        lowerPercentile: 50,\n        getElevationWeight: d => d.resale_price,\n        elevationAggregation: 'MAX',\n        transitions: {\n          elevationScale: 1000\n        },\n        ...commonAttributes,\n      }\n      break;\n    default: break;\n  }\n\n  setTxtLoading(\"80%\")\n\n  // console.log(border)\n  \n  const layers = glContext ? [\n    data && \n    // border &&\n      layerSel === 'scatter' \n      ? new ScatterplotLayer(layerAttributes) \n      : layerSel === 'heat' \n      ? new HeatmapLayer(layerAttributes)\n      : new HexagonLayer(layerAttributes)\n      // overlaySel.includes('Border') \n      // new GeoJsonLayer({\n      //   id: 'geojson',\n      //   border,\n      //   opacity: 0.8,\n      //   stroked: true,\n      //   filled: true,\n      //   lineWidthMinPixels: 1,\n      //   // extruded: true,\n      //   // wireframe: true,\n      //   // getElevation: f => Math.sqrt(f.properties.valuePerSqm) * 10,\n      //   // getFillColor: f => COLOR_SCALE(f.properties.growth),\n      //   getFillColor: [0, 0, 0, 1],\n      //   getLineColor: [80, 80, 80],\n      //   getLineWidth: 1,\n      //   pickable: true\n      // })\n  ] : [];\n\n  \n  if (loaded) {\n    const map = mapRef.current.getMap();\n    const deck = deckRef.current.deck;\n    if (layerSel !== prevLayer) {\n      if (map.getLayer(`resaletimeline${prevLayer}`)) map.removeLayer(`resaletimeline${prevLayer}`);\n      setPrevLayer(layerSel)\n      //! Initialize an empty deck.gl layer to prevent flashing\n      map.addLayer(\n        new MapboxLayer({ id: `resaletimeline${layerSel}`, deck }), // This id has to match the id of the deck.gl layer\n        'place_suburbs' // Optionally define id from Mapbox layer stack under which to add deck layer\n      );\n    }\n  }\n  \n\n  return (\n    <DeckGL\n      ref={deckRef}\n      onWebGLInitialized={setGLContext}\n      layers={layers}\n      initialViewState={INITIAL_VIEW_STATE}\n      controller={true}\n      getTooltip={getTooltip}\n      glOptions={{ stencil: true }} /* To render vector tile polygons correctly */\n    >\n      {glContext && (\n        <StaticMap \n          ref={mapRef}\n          gl={glContext}\n          mapStyle={mapStyle} \n          preventStyleDiffing={true} \n          attributionControl={false}\n          mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}\n          onLoad={onMapLoad}\n        />\n      )}\n    </DeckGL>\n);\n};\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport default function FilterPills() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <button className={classes.pill}>Property</button>\n      <button className={classes.pill}>Bedrooms</button>\n      <button className={classes.pill}>Price</button>\n      <button className={classes.pill}>MRT</button>\n      <button className={classes.pill}>Year</button>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    padding: '0.5rem',\n    backgroundColor: 'transparent',\n    position: 'absolute',\n  },\n  pill: {\n    flex: 1,\n    borderRadius: '25px',\n    border: 'none',\n    width: '1rem',\n    height: '3rem',\n    margin: '0.1rem',\n    backgroundColor: 'white',\n  }\n}));\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport default function FilterOption({name, control}) {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      {name}\n      {control === 'dropdown' && \n        name === 'Property' \n        ? (<select>\n          <option>HDB</option>\n          <option>Condo</option>\n          <option>Landed</option>\n          <option>Terrace</option>\n        </select>) \n        : name === 'Bedrooms' \n        ? (<select>\n          <option>3-room</option>\n          <option>4-room</option>\n          <option>5-room</option>\n        </select>) \n        : name === 'Prices' \n        && (<select>\n          <option>150k-250k</option>\n          <option>250k - 500k</option>\n          <option>more than 500k</option>\n        </select>) \n      }\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '0.5rem 1rem',\n    borderTop: '5px var(--dark-background) solid',\n    color: 'var(--grey-unselect)',\n    fontWeight: '600',\n    fontSize: '0.85rem',\n    letterSpacing: '0.025rem',\n    transition: 'all 0.35s',\n    '&:hover, &:active': {\n      borderTop: '5px var(--blue-highlight) solid',\n    },\n    '& select': {\n      marginTop: '0.5rem',\n      border: 'none',\n      borderRadius: '0.2rem',\n      borderStyle: 'none',\n      fontSize: '0.9rem',\n      letterSpacing: '0.025rem',\n      backgroundColor: 'transparent',\n      color: 'var(--blue-highlight)',\n      fontWeight: '600',\n      outlineColor: 'transparent',\n      transition: 'all ease-in-out 0.15s',\n      '&:focus, &:active': {\n        outline: 'none',\n        border: 'none',\n      }\n    }\n  },\n}));\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n// Inspired by blueprintjs\nexport default function CheckBox(props) {\n  const classes = useStyles();\n\n  return (\n    <Checkbox\n      className={classes.root}\n      disableRipple\n      color=\"default\"\n      checkedIcon={<span className={clsx(classes.icon, classes.checkedIcon)} />}\n      icon={<span className={classes.icon} />}\n      inputProps={{ 'aria-label': 'decorative checkbox' }}\n      {...props}\n    />\n  );\n}\n\n\nconst useStyles = makeStyles({\n  root: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n  },\n  icon: {\n    borderRadius: 3,\n    width: 16,\n    height: 16,\n    boxShadow: 'inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)',\n    backgroundColor: '#f5f8fa',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))',\n    '$root.Mui-focusVisible &': {\n      outline: '2px auto rgba(19,124,189,.6)',\n      outlineOffset: 2,\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#ebf1f5',\n    },\n    'input:disabled ~ &': {\n      boxShadow: 'none',\n      background: 'rgba(206,217,224,.5)',\n    },\n  },\n  checkedIcon: {\n    backgroundColor: '#137cbd',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))',\n    '&:before': {\n      display: 'block',\n      width: 16,\n      height: 16,\n      backgroundImage:\n        \"url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath\" +\n        \" fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 \" +\n        \"1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\\\")\",\n      content: '\"\"',\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#106ba3',\n    },\n  },\n});","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Radio from '@material-ui/core/Radio';\n\nconst useStyles = makeStyles({\n  root: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n  },\n  icon: {\n    borderRadius: '50%',\n    width: 16,\n    height: 16,\n    boxShadow: 'inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)',\n    backgroundColor: '#f5f8fa',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))',\n    '$root.Mui-focusVisible &': {\n      outline: '2px auto rgba(19,124,189,.6)',\n      outlineOffset: 2,\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#ebf1f5',\n    },\n    'input:disabled ~ &': {\n      boxShadow: 'none',\n      background: 'rgba(206,217,224,.5)',\n    },\n  },\n  checkedIcon: {\n    backgroundColor: '#137cbd',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))',\n    '&:before': {\n      display: 'block',\n      width: 16,\n      height: 16,\n      backgroundImage: 'radial-gradient(#fff,#fff 28%,transparent 32%)',\n      content: '\"\"',\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#106ba3',\n    },\n  },\n});\n\n// Inspired by blueprintjs\nexport default function RadioButton(props) {\n  const classes = useStyles();\n\n  return (\n    <Radio\n      className={classes.root}\n      disableRipple\n      color=\"default\"\n      checkedIcon={<span className={clsx(classes.icon, classes.checkedIcon)} />}\n      icon={<span className={classes.icon} />}\n      {...props}\n    />\n  );\n}","import React from 'react'\nimport { FiMenu } from \"react-icons/fi\"\nimport { makeStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport CheckBox from 'components/CheckBox'\nimport RadioButton from 'components/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Modal from '@material-ui/core/Modal'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport Fade from '@material-ui/core/Fade'\nimport { useRecoilState } from 'recoil'\nimport { \n  layerSelection, \n  modalControls,\n  overlaySelection\n} from 'data/recoil'\n\nexport default function FilterModal() {\n  const classes = useStyles()\n  const [open, setOpen] = React.useState(false)\n\n  return (\n    <>\n      <Button \n        onClick={() => setOpen(true)}\n        startIcon={<FiMenu className={classes.icon} />}\n        className={classes.button}\n        disableRipple> \n        {'More'}\n      </Button>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        onClose={() => setOpen(false)}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n          <div className={classes.paper}>\n            <h2 id=\"transition-modal-title\">More Selections</h2>\n            <div className=\"modal-filter-cols\">\n              <FilterGroup title=\"Filter Attributes\" group=\"attributes\"/>\n              <div>\n                <FilterGroup title=\"Layers\" group=\"layers\" closePanel={() => setOpen(false)}/>\n              </div>\n            </div>\n            <div className=\"modal-filter-footer\">\n              <div>\n                <button>Reset</button>\n                <button onClick={() => setOpen(false)}>Done</button>\n              </div>\n            </div>\n          </div>\n        </Fade>\n      </Modal>\n    </>\n  )\n}\n\nconst FilterGroup = ({title, group, closePanel}) => {\n  const [controls, setControls] = useRecoilState(modalControls)\n  const [layer, setLayer] = useRecoilState(layerSelection);\n  const [overlay, setOverlay] = useRecoilState(overlaySelection);\n  \n  //handler for radio groups\n  const handleLayer = (e) => setLayer(e.target.value);\n\n  //handler for checkboxes\n  const handleChange = (e) => {\n    setControls({ \n      ...controls,\n      [group]: {\n        ...controls[group],\n        [e.target.type]: {\n          ...controls[group][e.target.type],\n          [e.target.name]: e.target.checked\n        }\n      }\n    });\n    if (group === 'layers') {\n      let olyrs = [...overlay]\n      if (e.target.checked) {\n        olyrs.push(e.target.name)\n        setOverlay(olyrs)\n      } else {\n        const fOLyrs = olyrs.filter(val => val !== e.target.name);\n        setOverlay(fOLyrs)\n      }\n    }\n  };  \n\n  return (\n    <div>\n      <h3>{title}</h3>\n      {controls[group].radio\n       ? <RadioGroup value={layer} name={group}> \n          {Object.keys(controls[group].radio).map(lbl => {\n            const val = controls[group].radio[lbl]\n            return <FormControlLabel \n              value={val}\n              key={`filter-modal-radio-${val}`}\n              onChange={handleLayer}\n              onClick={closePanel}\n              control={<RadioButton value={val} />}\n              label={lbl}\n            />\n          })}\n        </RadioGroup>\n        : null\n      }\n      {controls[group].checkbox\n        ? <FormGroup>\n            {Object.keys(controls[group].checkbox).map(lbl => \n              <FormControlLabel\n                key={`filter-modal-checkbox-${lbl}`}\n                control={<CheckBox checked={controls[group].checkbox[lbl]} onChange={handleChange} name={lbl} />}\n                label={lbl}\n              />\n            )}\n          </FormGroup>\n        : null\n      }\n    </div>\n  )\n}\n\nconst useStyles = makeStyles({\n  button: { \n    textAlign: 'center',\n    color: 'var(--grey-unselect)',\n    fontWeight: 600,\n    transition: 'all ease-in-out 0.15s',\n    marginLeft: '-0.8rem',\n    marginBottom: '-0.4rem',\n    '&:hover': {\n      color: 'var(--blue-highlight)',\n      cursor: 'pointer',\n    },\n    '& span': {\n      flexDirection: 'column',\n      alignItems: 'center',\n      margin: 0,\n    },\n  },\n  icon: {\n    fontSize: '1.5rem',    \n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    color: 'var(--black-txt)',\n    minHeight: '70vh',\n    minWidth: '70vw',\n    overflowY: 'hidden',\n    backgroundColor: 'white',\n    boxShadow: 'var(--light-background)',\n    padding: '70px',\n    borderRadius: '5px',\n    border: 'none',\n    position: 'relative',\n    '&:focus': {\n      border: 'none',\n      outline: 'none',\n    },\n    '& h2': {\n      textTransform: 'uppercase',\n    },\n    '& h3': {\n      color: 'var(--blue-highlight)',\n    },\n    '& .modal-filter-cols': {\n      display: 'flex',\n      '& div': {\n        flex: 1,\n      }\n    },\n    '& .modal-filter-footer': {\n      position: 'absolute',\n      right: '5rem',\n      bottom: '5rem',\n      '& button': {\n        color: 'white',\n        marginTop: '20px',\n        marginLeft: '16px',\n        borderRadius: '5px',\n        letterSpacing: '0.75px',\n      },\n      '& button:nth-child(1)': {\n        background: 'var(--blue-highlight)'\n      },\n      '& button:nth-child(2)': {\n        background: '#273246'\n      }\n    }\n  },\n});","import React from 'react'\nimport FilterOption from './FilterOption'\nimport FilterModal from './FilterModal'\n// import Map3DToggle from './Filter3DToggle'\n// eslint-disable-next-line\n// import ProfileMenu from './ProfileMenu'\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport default function FilterBar() {\n  const classes = useStyles()\n  // const [show3D, set3D] = React.useState(false);\n  \n  // const handleChange = e => set3D(e.target.checked)\n\n  return (\n    <div className={classes.root}>\n        <div className={classes.logo}/>\n        <div className={classes.filters}>\n            <FilterOption name=\"Property\" control=\"dropdown\"/>\n            <FilterOption name=\"Bedrooms\" control=\"dropdown\"/>\n            <FilterOption name=\"Prices\" control=\"dropdown\"/>\n            <FilterModal/>\n            {/* <Map3DToggle show3D={show3D} handleChange={handleChange}/> */}\n        </div>\n        {/* <ProfileMenu/> */}\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'grid',\n    fontSize: '0.85rem',\n    gridTemplateColumns: 'minmax(150px, 10%) 1fr auto',\n  },\n  logo: {\n    width: '100px',\n    height: '2rem',\n    margin: '1rem',\n    backgroundColor: 'white',\n  },\n  filters: {\n    height: 'auto',\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, 1fr) minmax(2rem,5%)',\n  }\n}))\n","import { withStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nconst iOSBoxShadow =\n  '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\n\nconst IOSSlider = withStyles({\n  root: {\n    color: '#3880ff',\n    height: 2,\n    padding: '15px 0',\n    marginLeft: 12,\n    width: '95%',\n  },\n  thumb: {\n    height: 28,\n    width: 28,\n    backgroundColor: '#fff',\n    boxShadow: iOSBoxShadow,\n    marginTop: -14,\n    marginLeft: -14,\n    '&:focus, &:hover, &$active': {\n      boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        boxShadow: iOSBoxShadow,\n      },\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 12px)',\n    top: -15,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n    },\n  },\n  track: {\n    height: 1,\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5,\n    backgroundColor: '#bfbfbf',\n  },\n  mark: {\n    backgroundColor: '#bfbfbf',\n    height: 20,\n    width: 2,\n    marginTop: -10,\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor',\n  },\n})(Slider);\n\nexport default IOSSlider;","// /* global requestAnimationFrame, cancelAnimationFrame */\nimport React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IOSSlider from 'components/Slider';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Button from '@material-ui/core/IconButton';\nimport { MdPlayArrow, MdPause } from \"react-icons/md\";\nimport { useSetRecoilState } from 'recoil';\nimport { UITxtLoading } from 'data/recoil';\n\nexport default function Timeline({min, max, value, onChange}) {\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  setTxtLoading(\"Loading Timeline...\")\n  const classes = useStyles();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [animation] = useState({});\n\n  const MS_PER_DAY = 8.64e7;\n  const ANIMATION_SPEED = 30;\n  \n  // prettier-ignore\n  useEffect(() => {\n    return () => animation.id && cancelAnimationFrame(animation.id);\n  }, [animation]);\n\n  if (isPlaying && !animation.id) {\n    const span = value[1] - value[0];\n    let nextValueMin = value[0] + (MS_PER_DAY * ANIMATION_SPEED);\n    if (nextValueMin + span >= max) {\n      nextValueMin = min;\n    }\n    animation.id = requestAnimationFrame(() => {\n      animation.id = 0;\n      onChange([nextValueMin, nextValueMin + span]);\n    });\n  }\n\n  const isButtonEnabled = value[0] > min || value[1] < max;\n\n  return (\n    <div className={classes.root}>\n      <Button variant=\"outlined\"  disabled={!isButtonEnabled} onClick={() => setIsPlaying(!isPlaying)}>\n        {isPlaying ? <MdPause title=\"Stop\" /> : <MdPlayArrow title=\"Animate\" />}\n      </Button>\n      <IOSSlider\n        getAriaValueText={valuetext}\n        aria-labelledby=\"ios slider\"\n        className={classes.timeline}\n        // marks={marks}\n        // step={1/12}\n        min={min}\n        max={max}\n        value={value}\n        onChange={(event, newValue) => onChange(newValue)}\n        valueLabelDisplay=\"auto\"\n        valueLabelFormat={formatLabel}\n      />\n    </div>\n  )\n}\n\nexport const getTooltip = ({object}) => {\n  return (\n    object &&\n    `\\\n    Time: ${new Date(object.timestamp).toUTCString()}\n    Magnitude: ${object.magnitude}\n    Depth: ${object.depth}\n    `\n  );\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n    height: '4rem',\n    backgroundColor: 'white',\n    color: 'var(--dark-background)',\n    display: 'grid',\n    gridTemplateColumns: 'minmax(50px, 5%) auto',\n    textAlign: 'center',\n    borderTop: '1px var(--grey-border) solid',\n    overflow: 'auto',\n    overflowY: 'hidden',\n    '&>*': {\n      margin: 'auto 0',\n    }, \n    '& button': {\n      position: 'sticky',\n      left: '1rem',\n      zIndex: 3,\n      border: '0.1rem solid var(--dark-highlight)',\n      borderRadius: '50%',\n      height: '2.5rem',\n      width: '2.5rem',\n      margin: '0.5rem 1.5rem',\n      color: 'var(--dark-highlight)',\n      fontSize: '10rem',\n      padding: '0.3rem'\n    },\n    '& button:hover': {\n      color: 'var(--blue-highlight)',\n    },\n    '& button::after': {\n      content: 'close-quote',\n      width: '200%',\n      height: '200%',\n      position: 'absolute',\n      zIndex: -1,\n      backgroundColor: 'white',\n    },\n    '& button::before': {\n      content: 'close-quote',\n      position: 'absolute',\n      borderRadius: '50%',\n      height: '2.4rem',\n      width: '2.4rem',\n      border: '0.1rem solid var(--dark-highlight)',\n    },\n    '& button:hover::before': {\n      border: '0.1rem solid var(--blue-highlight)',\n    },\n    '& button:disabled::before': {\n      border: '0.1rem solid rgba(0, 0, 0, 0.26)',\n    },\n  },\n  timeline: {\n    zIndex: 2,\n    margin: 'auto 1rem',\n  }\n}));\n\n\nfunction ValueLabelComponent(props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n}\n\nValueLabelComponent.propTypes = {\n  children: PropTypes.element.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nfunction formatLabel(t) {\n  const date = new Date(t);\n  return `${date.getUTCFullYear()}/${date.getUTCMonth() + 1}`;\n}\n\nexport function getTimeRange(data) {\n  if (!data) {\n    return null;\n  }\n  // console.log(data)\n  return data?.reduce(\n    (range, d) => {\n      const t = d.timestamp;\n      range[0] = Math.min(range[0], t);\n      range[1] = Math.max(range[1], t);\n      return range;\n    },\n    [Infinity, -Infinity]\n  );\n}","import React from 'react'\nimport { FiMap, FiBarChart2, FiChevronUp, FiMenu, FiBookmark, FiSettings } from \"react-icons/fi\";\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport default function TabBar() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <button className={classes.item}> <FiMap/> Map </button>\n      <button className={classes.item}> <FiBarChart2/> Charts </button>\n\n      <button className={classes.pull}>\n        <FiChevronUp />\n        <br />\n        <FiMenu />\n      </button>\n\n      <button className={classes.item}> <FiBookmark/> Highlights </button>\n      <button className={classes.item}> <FiSettings /> Settings </button>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    height: '3.8rem',\n    backgroundColor: 'white',\n  },\n  item: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '0.8rem',\n    border: 'none',\n    backgroundColor: 'white',\n    '& svg': {\n      fontSize: '1.5rem',\n      margin: '0.5rem 0.1rem',\n    }\n  },\n  pull: {\n    flex: 0.5,\n    position: 'relative',\n    bottom: '2rem',\n    border: 'none',\n    borderRadius: '15px',\n    backgroundColor: 'white',\n    boxShadow: '6px 10px 35px 0px rgba(225,225,225,0.5)',\n    '& svg:nth-child(3)': {\n      fontSize: '1.2rem',\n    }\n  }\n}));\n","import React from 'react'\nimport Drawer from '@material-ui/core/Drawer'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { useRecoilState } from 'recoil'\n\nexport default function TabDrawer({\n  state,\n  width, \n  anchor,\n  triggerTagLocation,\n  triggerName,\n  triggerHeight, \n  triggerWidth,\n  styleSeparator,\n  styleTrigger,\n  children\n}) {\n  const useStyles = makeStyles(() => ({\n    drawer: {\n      width: width,\n      marginTop: '2rem',\n      flexShrink: 0,\n      zIndex: 1,\n      color: 'white'\n    },\n    drawerPaper: {\n      top: '4rem',\n      width: width,\n      height: `calc(100% - 8rem)`,\n      overflowY: 'visible',\n      background: 'var(--dark-background)',\n      padding: '1rem',\n      color: 'white',\n    },\n    drawerContainer: {\n      overflow: 'visible',\n    },\n    separator: {\n      width: '100%',\n      height: '0.3rem',\n      background: 'var(--blue-highlight)',\n      display:'block',\n      zIndex: 10,\n      marginTop: '-1rem',\n      marginLeft: '-1rem',\n      ...styleSeparator\n    },\n    drawerTrigger: {\n      position: 'relative',\n      transformOrigin: 'right',\n      transform: 'rotate(270deg)',\n      right: `calc(100% - ${triggerWidth} + ${triggerHeight})`,\n      top: 'calc(-1.5rem)',\n      height: triggerHeight,\n      width: triggerWidth,\n      cursor: 'pointer',\n      userSelect: 'none',\n      visibility: 'visible',\n      background: 'var(--dark-highlight)',\n      color: 'white',\n      textAlign: 'center',\n      borderRadius: '0.3rem 0.3rem 0 0',\n      ...styleTrigger\n    }\n  }))\n  const [open, setOpen] = useRecoilState(state);\n  const toggleDrawerOpen = () => setOpen(!open)\n  const classes = useStyles()\n\n  return (\n    <>\n      <Drawer\n        className={classes.drawer}\n        variant='persistent'\n        open={open}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        anchor={anchor}\n      >\n        <div className={classes.drawerContainer}>\n          <span className={classes.separator}></span>\n          <div \n            onClick={toggleDrawerOpen}\n            className={classes.drawerTrigger}\n          >\n            {triggerTagLocation === 'start' && `[${open ? 'Hide': 'Show'}] ` }\n            {triggerName} \n            {triggerTagLocation === 'end' && `[${open ? 'Hide': 'Show'}]` }\n          </div>\n          {children}\n        </div>\n      </Drawer>\n    </>\n  )\n}\n\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport TabDrawer from 'components/TabDrawer'\nimport { useRecoilValue } from 'recoil'\nimport { \n  resaleData,\n  UIdrawerDataPointOpen \n} from 'data/recoil'\n\nexport default function DrawerDataPoint() {\n  const classes = useStyles()\n  const data = useRecoilValue(resaleData)\n  \n  return (\n    <>\n      <TabDrawer\n        state={UIdrawerDataPointOpen}\n        width='20vw'\n        triggerTagLocation='start'\n        triggerName='Data Points'\n        triggerHeight= '2rem'\n        triggerWidth='50%'\n        styleSeparator={style.separator}\n        styleTrigger={style.trigger}\n      >\n        <SortBar/>\n        <div className={classes.dataCardContainer}>\n          {data.slice(0,50).map((d,i) => <DataCard key={`datapoint-${i}`} data={d}/>)}\n        </div>\n      </TabDrawer>\n    </>\n  )\n}\n\nconst DataCard = ({data}) => {\n  const classes = useStyles()\n  \n  return (\n    <div className={classes.dataCard}>\n      <p className=\"txt-title\">{data.address}</p>\n      <small className=\"txt-subtitle\">{data.room}</small>\n      <p><small className=\"txt-highlight\">S${data.resale_price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}</small></p>\n      <div className=\"txt-details-container\">\n        <span><small>{data.model} Model</small></span>\n        <span className=\"dot\">·</span>\n        <span><small>{data.floor_area_sqm} sqm</small></span>\n        <span className=\"dot\">·</span>\n        <span><small>{data.lRemain} remaining </small></span>\n      </div>\n    </div>\n  )\n}\n\nconst SortBar = () => {\n  const classes = useStyles()\n  return (\n    <div className={classes.sortBar}>\n      <p className='sortBar__title'>SORT BY</p>\n      <div className='sortBar__option'>\n        A to Z\n        <span className={classes.arrow}>&#62;</span>\n      </div>\n    </div>\n  )\n}\n\nconst style = {\n  trigger: {\n    transform: 'rotate(90deg)',\n    right: '-12.5rem',\n    top: 'calc(10rem)', //TODO: find heuristic calc\n    marginTop: '-1rem',\n  },\n  separator: {\n    width: 'calc(100% + 2rem)',\n  }\n}\n\nconst useStyles = makeStyles(() => ({\n  sortBar: {\n    marginTop: '-1rem',\n    '& .sortBar__title': {\n      fontSize: '12.8px',\n      fontSpacing: '0.75px',\n      display: 'block',\n      paddingBottom: '10px',\n      fontWeight: '700',\n    },\n    '& .sortBar__option': {\n      marginTop: '-0.5rem',\n      marginBottom: '1rem',\n      border: '2px solid var(--blue-highlight)',\n      borderRadius: '5px',\n      padding: '10px 0 10px 10px',\n      cursor: 'not-allowed !important',\n      overflowY: 'hidden' \n    },\n  },\n  arrow: {\n    height: '3rem',\n    width: '2.75rem',\n    position: 'absolute',\n    right: '1.1rem',\n    marginTop: '-0.9rem',\n    textAlign: 'center',\n    verticalAlign: 'middle',\n    lineHeight: '3rem', \n    padding: 0,\n    transform: 'rotate(90deg)',\n    backgroundColor: 'var(--blue-highlight)',\n    borderRadius: '5px 5px 0 0',\n    content: ' > ',\n  },\n  dataCardContainer: {\n    height: 'calc(100vh - 15rem)',\n    overflowY: 'scroll',\n    marginRight: '-0.2rem',\n    paddingRight: '0.3rem'\n  },\n  dataCard: {\n    width: 'calc(100% - 1rem)',\n    height: '10vh',\n    overflow: 'hidden',\n    background: 'white',\n    borderRadius: '5px',\n    color: 'var(--black-txt)',\n    padding: '0.5rem',\n    marginBottom: '0.5rem',\n    '& p, & small': {\n      margin: '0.2rem 0'\n    },\n    '& .txt-title': {\n      fontSize: '0.8rem',\n      fontWeight: 800,\n    },\n    '& .txt-subtitle': {\n      fontWeight: 700,\n    },\n    '& .txt-highlight': {\n      fontStyle: 'italic',\n      color: 'var(--blue-highlight)',\n      fontWeight: 500,\n    },\n    '& .txt-details-container': {\n      fontSize: '0.7rem',\n      marginTop: '0.3rem'\n    },\n    '& .dot': {\n      fontSize: '1rem',\n      lineHeight: '0.1rem',\n      margin: '0 0.35rem'\n    },\n  }\n}))","import React from 'react'\nimport TabDrawer from 'components/TabDrawer'\nimport { UIdrawerStatOpen } from 'data/recoil'\n\nexport default function DrawerStatistics() {\n\n  return (\n    <>\n      <TabDrawer\n        state={UIdrawerStatOpen}\n        width='25vw'\n        anchor='right'\n        triggerTagLocation='end'\n        triggerName='Area Statistics '\n        triggerHeight='2rem'\n        triggerWidth='50%'\n        styleSeparator={style.separator}\n      >\n\n      </TabDrawer>\n    </>\n  )\n}\n\nconst style = {\n  separator: {\n    width: 'calc(100% + 2rem)',\n    marginRight: '-1rem',\n  }\n}\n","import React, { useState, useMemo } from 'react';\nimport MapboxGLMap from 'layouts/common/Map'\nimport FilterPills from 'layouts/mobile/FilterPills'\nimport FilterBar from 'layouts/desktop/FilterBar';\nimport Timeline, { getTimeRange } from 'layouts/desktop/Timeline'\nimport TabBar from 'layouts/mobile/TabBar';\nimport DrawerDataPoint from 'layouts/desktop/DrawerDataPoint';\nimport DrawerStatistics from 'layouts/desktop/DrawerStatistics';\nimport { useMediaQuery } from 'react-responsive'\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSetRecoilState, useRecoilValue } from 'recoil';\nimport { resaleData, UITxtLoading } from 'data/recoil';\nimport { modalControls } from 'data/recoil';\n\n\nexport default function App() {\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  setTxtLoading(\"Loading Application...\")\n  const classes = useStyles()\n  const isMobile = useMediaQuery({ maxWidth: 767, orientation: \"portrait\"})\n  const data = useRecoilValue(resaleData)\n  const modal = useRecoilValue(modalControls)\n\n  const [filter, setFilter] = useState(null)\n\n  const timeRange = useMemo(() =>  getTimeRange(data), [data]);\n  const filterValue = filter || timeRange;\n\n  return (\n    <>\n      {data && (\n        <div className={classes.App}>\n          { !isMobile && <>\n            <div className=\"section header\"> <FilterBar /> </div>\n            <DrawerDataPoint/>\n            {modal.layers.checkbox['Region Border Layer (2D Only)'] && <DrawerStatistics/>}\n            </>\n          }\n          <main className=\"content\">\n            <MapboxGLMap filterValue={filterValue}/>\n            {isMobile && <FilterPills/>}\n          </main>\n          <footer className=\"footer\" >\n            { isMobile ? <TabBar/> : (timeRange && (\n              <Timeline \n                min={timeRange[0]}\n                max={timeRange[1]}\n                value={filterValue}\n                onChange={setFilter}\n              />\n            ))}\n          </footer>\n        </div>\n      )}\n    </>\n  );\n}\n\nconst useStyles = makeStyles(() => ({\n  App: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    height: '100%',\n    '& .section': { fontSize: '1rem' },\n    '& .header, & .footer': {\n      flex: '1',\n      height: '100%',\n      width: '100%',\n      background: 'var(--dark-background)',\n      zIndex: 2,\n    },\n    '& .footer': { zIndex: 2, },\n    '& .content': { flex: 20, },\n  }\n}));","import React from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\n// import CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRecoilValue } from 'recoil';\nimport { UITxtLoading } from 'data/recoil';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: 'var(--blue-highlight)',\n    background: 'white'\n  },\n}));\n\nexport default function BackDrop({open}) {\n  const txtLoading = useRecoilValue(UITxtLoading)\n  const classes = useStyles();\n\n  return (\n    <div>\n      <Backdrop className={classes.backdrop} open={open}>\n        {/* <CircularProgress color=\"inherit\" /> */}\n        <h1>{txtLoading}</h1>\n        {/* {console.log(txtLoading)} */}\n      </Backdrop>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/resale1990_2020onwards.3e108b0b.csv\";","export default __webpack_public_path__ + \"static/media/borders.e3d1a48e.geojson\";","import React from 'react'\nimport App from \"./App\"\nimport BackDrop from 'components/BackDrop'\n\n// Data \nimport * as d3 from 'd3-fetch'\nimport resales from 'data/resale1990_2020onwards.csv'\nimport borders from 'data/borders.geojson'\nimport { useSetRecoilState, useRecoilValue } from 'recoil';\nimport { resaleData, borderData, UILoading, UITxtLoading } from 'data/recoil'\n\nexport default function InitApp() {\n  const loading = useRecoilValue(UILoading)\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  const setResale = useSetRecoilState(resaleData)\n  const setBorder = useSetRecoilState(borderData)\n\n  d3.csv(resales).then(res => {\n    if (res) {\n      const data = res.map(row => ({\n        address: String(`${row.block} ${row.street_name}`),\n        room: String(row.flat_type),\n        model: String(row.flat_model),\n        lRemain: String(row.remaining_lease),\n\n        timestamp: new Date(`${row.month}`).getTime(),\n        latitude: Number(row.latitude),\n        longitude: Number(row.longitude),\n        resale_price: Number(row.resale_price),\n        floor_area_sqm: Number(row.floor_area_sqm)\n      }));\n      setTxtLoading(\"Loading 100,000 Data Points...\")\n      \n      setResale(data)\n\n      d3.json(borders).then(data => {\n        setBorder(data)\n        setTxtLoading(\"90%\")\n      });\n    }\n  })\n\n  return (\n    <>\n      {loading && <BackDrop open={true}/>}\n      <App/>\n    </>\n  )\n}\n","// Framework\nimport React from 'react';\n\n//Routing\nimport { render } from 'react-dom';\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { RecoilRoot } from 'recoil'\n\nimport InitApp from 'pages/InitApp'\nimport './index.css';\n\nconst hist = createBrowserHistory();\n      \nrender(\n  // <React.StrictMode>\n    <RecoilRoot>\n      <Router history={hist}>\n        <Switch>\n          <Route\n            path=\"/\"\n            render={props => {\n              return <InitApp {...props}/>;\n            }}\n          />\n          <Route render={() => <Redirect to=\"/\" />} />\n        </Switch>\n      </Router>\n    </RecoilRoot> \n  // </React.StrictMode>,\n  ,document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}