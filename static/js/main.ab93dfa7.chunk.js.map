{"version":3,"sources":["data/recoil.js","layouts/common/Map.js","layouts/mobile/FilterPills.js","layouts/desktop/FilterOption.js","components/CheckBox.js","components/Radio.js","layouts/desktop/FilterModalGroup.js","layouts/desktop/FilterModal.js","components/Switch.js","layouts/desktop/Filter3DToggle.js","layouts/desktop/FilterBar.js","components/Slider.js","layouts/desktop/Timeline.js","layouts/mobile/TabBar.js","pages/App.js","components/BackDrop.js","data/resale1990_2020onwards.csv","data/borders.geojson","pages/InitData.js","index.js"],"names":["DEFAULT_LAYER","resaleData","atom","key","default","borderData","modalControls","attributes","checkbox","layers","radio","panels","layerSelection","overlaySelection","UILoading","UITxtLoading","INITIAL_VIEW_STATE","latitude","longitude","zoom","pitch","bearing","getTooltip","object","date","Date","timestamp","resale_price","toString","replace","floor_area_sqm","getUTCFullYear","getUTCMonth","dataFilter","DataFilterExtension","filterSize","fp64","Map","show3D","filterValue","mapStyle","MAP_STYLE","setLoading","useSetRecoilState","setTxtLoading","useState","loaded","setLoaded","glContext","setGLContext","deckRef","useRef","mapRef","data","useRecoilValue","layerSel","prevLayer","setPrevLayer","onMapLoad","useCallback","map","current","getMap","deck","addLayer","MapboxLayer","id","commonAttributes","radiusMinPixels","getPosition","d","getRadius","timelineAttributes","opacity","getFilterValue","filterRange","filterSoftRange","extensions","layerAttributes","radiusPixels","getWeight","radiusScale","wrapLongitude","getFillColor","r","Math","sqrt","max","pickable","extruded","elevationScale","radius","coverage","lowerPercentile","getElevationWeight","elevationAggregation","transitions","ScatterplotLayer","HeatmapLayer","HexagonLayer","getLayer","removeLayer","ref","onWebGLInitialized","initialViewState","controller","glOptions","stencil","gl","preventStyleDiffing","attributionControl","mapboxApiAccessToken","process","onLoad","FilterPills","classes","useStyles","className","root","pill","makeStyles","width","display","padding","backgroundColor","position","flex","borderRadius","border","height","margin","FilterOption","name","control","flexDirection","borderTop","color","fontWeight","fontSize","letterSpacing","transition","marginTop","borderStyle","outlineColor","outline","CheckBox","props","Checkbox","disableRipple","checkedIcon","clsx","icon","inputProps","boxShadow","backgroundImage","outlineOffset","background","content","RadioButton","Radio","FilterGroup","title","group","closePanel","useRecoilState","controls","setControls","layer","setLayer","overlay","setOverlay","handleLayer","e","target","value","handleChange","type","checked","olyrs","push","fOLyrs","filter","val","RadioGroup","Object","keys","lbl","FormControlLabel","onChange","onClick","label","FormGroup","FilterModal","React","open","setOpen","Button","startIcon","button","Modal","aria-labelledby","aria-describedby","modal","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","paper","textAlign","marginLeft","marginBottom","cursor","alignItems","justifyContent","minHeight","minWidth","overflowY","textTransform","right","bottom","AntSwitch","withStyles","theme","switchBase","palette","grey","transform","common","white","borderColor","thumb","track","Switch","Map3DToggle","Typography","component","Grid","container","spacing","item","FilterBar","set3D","logo","filters","gridTemplateColumns","iOSBoxShadow","IOSSlider","active","valueLabel","left","top","rail","mark","markActive","Slider","Timeline","min","isPlaying","setIsPlaying","animation","useEffect","cancelAnimationFrame","span","nextValueMin","MS_PER_DAY","requestAnimationFrame","isButtonEnabled","variant","disabled","getAriaValueText","valuetext","timeline","event","newValue","valueLabelDisplay","valueLabelFormat","formatLabel","overflow","zIndex","t","TabBar","pull","App","isMobile","useMediaQuery","maxWidth","orientation","setFilter","timeRange","useMemo","reduce","range","Infinity","getTimeRange","backdrop","drawer","BackDrop","txtLoading","InitData","loading","setResale","setBorder","d3","resales","then","res","row","month","getTime","Number","borders","hist","createBrowserHistory","render","history","path","to","document","getElementById"],"mappings":"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","file":"static/js/main.ab93dfa7.chunk.js","sourcesContent":["import { atom } from 'recoil'\n\nexport const DEFAULT_LAYER = 'scatter'\n\nexport const resaleData = atom({\n  key: 'resaleData',\n  default: null\n})\n\nexport const borderData = atom({\n  key: 'borderData',\n  default: null\n})\n\nexport const modalControls = atom({\n  key: 'modalControls',\n  default: {\n    attributes: {\n      checkbox: {\n        'Amenities': true,\n        'MRT': false,\n        'Schools': false,\n        'Parks': false,\n        'Race Ratio': false,\n        'Gender Ratio': false,\n        'Population Density': false,\n      }\n    }, \n    layers: {\n      radio: {\n        'Scatter Layer (2D Only)': DEFAULT_LAYER,\n        'Heat Map (2D Only)': 'heat',\n        'Hexagon Layer (3D Only)': 'hex',\n      },\n      checkbox: {\n        'Region Border Layer (2D Only)': false,\n      }\n    },\n    panels: {\n      checkbox: {\n        'Data Points List (Left)': false,\n        'Statistics Panel (Right)': false\n      }\n    }\n  }\n})\n\nexport const layerSelection = atom({\n  key: 'layerSelection',\n  default: DEFAULT_LAYER\n})\n\nexport const overlaySelection = atom({\n  key: 'overlaySelection',\n  default: []\n})\n\nexport const UILoading = atom({\n  key: 'UILoading',\n  default: true\n})\n\nexport const UITxtLoading = atom({\n  key: 'UITxtLoading',\n  default: \"Loading 100,000 Data Points...\"\n})","import React, { useRef, useState, useCallback } from \"react\";\nimport DeckGL from '@deck.gl/react';\nimport { StaticMap } from 'react-map-gl';\nimport { DataFilterExtension } from '@deck.gl/extensions';\nimport { ScatterplotLayer, GeoJsonLayer } from '@deck.gl/layers';\nimport { HeatmapLayer, HexagonLayer } from '@deck.gl/aggregation-layers';\nimport { MapboxLayer } from \"@deck.gl/mapbox\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\n\nimport MAP_STYLE from \"positron.json\";\nimport { useRecoilValue, useSetRecoilState } from 'recoil'\nimport { layerSelection, overlaySelection, resaleData, borderData, DEFAULT_LAYER, UILoading, UITxtLoading} from 'data/recoil'\n\nconst INITIAL_VIEW_STATE = {\n  latitude: 1.3451,\n  longitude: 103.8198,\n  zoom: 11,\n  pitch: 40,\n  bearing: -10\n};\n\nfunction getTooltip({object}) {\n  const date = new Date(object?.timestamp);\n  return (\n    object &&\n    `\\\n    Resale price: S$${object.resale_price.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\")}\n    Floor area: ${object.floor_area_sqm} sqm\n    Transacted on: ${date.getUTCFullYear()}-${date.getUTCMonth() + 1}\n    `\n  );\n}\n\nconst dataFilter = new DataFilterExtension({\n  filterSize: 1,\n  fp64: false\n})\n\nexport default function Map({show3D, filterValue, mapStyle = MAP_STYLE}) {\n  const setLoading = useSetRecoilState(UILoading)\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  setTxtLoading(\"85%\")\n  const [loaded, setLoaded] = useState(false)\n  const [glContext, setGLContext] = useState();\n  const deckRef = useRef(null);\n  const mapRef = useRef(null);\n  const data = useRecoilValue(resaleData)\n  const border = useRecoilValue(borderData)\n  const layerSel = useRecoilValue(layerSelection)\n  const overlaySel = useRecoilValue(overlaySelection)\n  const [prevLayer, setPrevLayer] = useState(DEFAULT_LAYER)\n\n  const onMapLoad = useCallback(() => {\n    const map = mapRef.current.getMap();\n    const deck = deckRef.current.deck;\n    setLoading(false)\n    setTxtLoading(\"\")\n    setLoaded(true)\n    \n    //! Initialize an empty deck.gl layer to prevent flashing\n    map.addLayer(\n      new MapboxLayer({ id: `resaletimeline${prevLayer}`, deck }), // This id has to match the id of the deck.gl layer\n      'place_suburbs' // Optionally define id from Mapbox layer stack under which to add deck layer\n    );\n  }, [layerSel, setLoading, setTxtLoading]);\n\n  const commonAttributes = {\n    id: `resaletimeline${layerSel}`,\n    data,\n    radiusMinPixels: 1,\n    getPosition: d => [d.longitude, d.latitude], // getPosition: d => [d.longitude, d.latitude, -d.depth * 1000],\n    getRadius: d => d.floor_area_sqm, // getRadius: d => Math.pow(2, d.floor_area_sqm),\n  }\n\n  const timelineAttributes = {\n    opacity: 0.3,\n    getFilterValue: d => d.timestamp,\n    filterRange: [filterValue[0], filterValue[1]],\n    filterSoftRange: [\n      filterValue[0] * 0.9 + filterValue[1] * 0.1,\n      filterValue[0] * 0.1 + filterValue[1] * 0.9\n    ],\n    extensions: [dataFilter],\n  }\n\n  let layerAttributes = null\n\n  switch (layerSel) {\n    case 'heat':\n      layerAttributes = {\n        radiusPixels: 60,\n        getWeight: d => d.resale_price,\n        ...commonAttributes,\n        ...timelineAttributes,\n      }\n      break;\n    case 'scatter':\n      layerAttributes = {\n        radiusScale: 0.6,\n        wrapLongitude: true,\n        getFillColor: d => {\n          const r = Math.sqrt(Math.max(d.resale_price, 0));\n          return [255 - r * 0.3, r * 0.18, r * 0.8]; // return [255, 0, 0];\n        },\n        pickable: true,\n        ...commonAttributes,\n        ...timelineAttributes,\n      }\n      break;\n    case 'hex': \n      layerAttributes = {\n        extruded: true,\n        elevationScale: 10,\n        opacity: 0.8,\n        radius: 509,\n        coverage: 0.88,\n        lowerPercentile: 50,\n        getElevationWeight: d => d.resale_price,\n        elevationAggregation: 'MAX',\n        transitions: {\n          elevationScale: 1000\n        },\n        ...commonAttributes,\n      }\n      break;\n    default: break;\n  }\n\n  setTxtLoading(\"80%\")\n\n  // console.log(border)\n  \n  const layers = glContext ? [\n    data && \n    // border &&\n      layerSel === 'scatter' \n      ? new ScatterplotLayer(layerAttributes) \n      : layerSel === 'heat' \n      ? new HeatmapLayer(layerAttributes)\n      : new HexagonLayer(layerAttributes)\n      // overlaySel.includes('Border') \n      // new GeoJsonLayer({\n      //   id: 'geojson',\n      //   border,\n      //   opacity: 0.8,\n      //   stroked: true,\n      //   filled: true,\n      //   lineWidthMinPixels: 1,\n      //   // extruded: true,\n      //   // wireframe: true,\n      //   // getElevation: f => Math.sqrt(f.properties.valuePerSqm) * 10,\n      //   // getFillColor: f => COLOR_SCALE(f.properties.growth),\n      //   getFillColor: [0, 0, 0, 1],\n      //   getLineColor: [80, 80, 80],\n      //   getLineWidth: 1,\n      //   pickable: true\n      // })\n  ] : [];\n\n  \n  if (loaded) {\n    const map = mapRef.current.getMap();\n    const deck = deckRef.current.deck;\n    if (layerSel !== prevLayer) {\n      if (map.getLayer(`resaletimeline${prevLayer}`)) map.removeLayer(`resaletimeline${prevLayer}`);\n      setPrevLayer(layerSel)\n      //! Initialize an empty deck.gl layer to prevent flashing\n      map.addLayer(\n        new MapboxLayer({ id: `resaletimeline${layerSel}`, deck }), // This id has to match the id of the deck.gl layer\n        'place_suburbs' // Optionally define id from Mapbox layer stack under which to add deck layer\n      );\n    }\n  }\n  \n\n  return (\n    <DeckGL\n      ref={deckRef}\n      onWebGLInitialized={setGLContext}\n      layers={layers}\n      initialViewState={INITIAL_VIEW_STATE}\n      controller={true}\n      getTooltip={getTooltip}\n      glOptions={{ stencil: true }} /* To render vector tile polygons correctly */\n    >\n      {glContext && (\n        <StaticMap \n          ref={mapRef}\n          gl={glContext}\n          mapStyle={mapStyle} \n          preventStyleDiffing={true} \n          attributionControl={false}\n          mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}\n          onLoad={onMapLoad}\n        />\n      )}\n    </DeckGL>\n);\n};\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport default function FilterPills() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <button className={classes.pill}>Property</button>\n      <button className={classes.pill}>Bedrooms</button>\n      <button className={classes.pill}>Price</button>\n      <button className={classes.pill}>MRT</button>\n      <button className={classes.pill}>Year</button>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    padding: '0.5rem',\n    backgroundColor: 'transparent',\n    position: 'absolute',\n  },\n  pill: {\n    flex: 1,\n    borderRadius: '25px',\n    border: 'none',\n    width: '1rem',\n    height: '3rem',\n    margin: '0.1rem',\n    backgroundColor: 'white',\n  }\n}));\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport default function FilterOption({name, control}) {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      {name}\n      {control === 'dropdown' && \n        name === 'Property' \n        ? (<select>\n          <option>HDB</option>\n          <option>Condo</option>\n          <option>Landed</option>\n          <option>Terrace</option>\n        </select>) \n        : name === 'Bedrooms' \n        ? (<select>\n          <option>3-room</option>\n          <option>4-room</option>\n          <option>5-room</option>\n        </select>) \n        : name === 'Prices' \n        && (<select>\n          <option>150k-250k</option>\n          <option>250k - 500k</option>\n          <option>more than 500k</option>\n        </select>) \n      }\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '0.5rem 1rem',\n    borderTop: '5px var(--dark-background) solid',\n    color: 'var(--grey-unselect)',\n    fontWeight: '600',\n    fontSize: '0.85rem',\n    letterSpacing: '0.025rem',\n    transition: 'all 0.35s',\n    '&:hover, &:active': {\n      borderTop: '5px var(--blue-highlight) solid',\n    },\n    '& select': {\n      marginTop: '0.5rem',\n      border: 'none',\n      borderRadius: '0.2rem',\n      borderStyle: 'none',\n      fontSize: '0.9rem',\n      letterSpacing: '0.025rem',\n      backgroundColor: 'transparent',\n      color: 'var(--blue-highlight)',\n      fontWeight: '600',\n      outlineColor: 'transparent',\n      transition: 'all ease-in-out 0.15s',\n      '&:focus, &:active': {\n        outline: 'none',\n        border: 'none',\n      }\n    }\n  },\n}));\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n// Inspired by blueprintjs\nexport default function CheckBox(props) {\n  const classes = useStyles();\n\n  return (\n    <Checkbox\n      className={classes.root}\n      disableRipple\n      color=\"default\"\n      checkedIcon={<span className={clsx(classes.icon, classes.checkedIcon)} />}\n      icon={<span className={classes.icon} />}\n      inputProps={{ 'aria-label': 'decorative checkbox' }}\n      {...props}\n    />\n  );\n}\n\n\nconst useStyles = makeStyles({\n  root: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n  },\n  icon: {\n    borderRadius: 3,\n    width: 16,\n    height: 16,\n    boxShadow: 'inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)',\n    backgroundColor: '#f5f8fa',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))',\n    '$root.Mui-focusVisible &': {\n      outline: '2px auto rgba(19,124,189,.6)',\n      outlineOffset: 2,\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#ebf1f5',\n    },\n    'input:disabled ~ &': {\n      boxShadow: 'none',\n      background: 'rgba(206,217,224,.5)',\n    },\n  },\n  checkedIcon: {\n    backgroundColor: '#137cbd',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))',\n    '&:before': {\n      display: 'block',\n      width: 16,\n      height: 16,\n      backgroundImage:\n        \"url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath\" +\n        \" fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 \" +\n        \"1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\\\")\",\n      content: '\"\"',\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#106ba3',\n    },\n  },\n});","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Radio from '@material-ui/core/Radio';\n\nconst useStyles = makeStyles({\n  root: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n  },\n  icon: {\n    borderRadius: '50%',\n    width: 16,\n    height: 16,\n    boxShadow: 'inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)',\n    backgroundColor: '#f5f8fa',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))',\n    '$root.Mui-focusVisible &': {\n      outline: '2px auto rgba(19,124,189,.6)',\n      outlineOffset: 2,\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#ebf1f5',\n    },\n    'input:disabled ~ &': {\n      boxShadow: 'none',\n      background: 'rgba(206,217,224,.5)',\n    },\n  },\n  checkedIcon: {\n    backgroundColor: '#137cbd',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))',\n    '&:before': {\n      display: 'block',\n      width: 16,\n      height: 16,\n      backgroundImage: 'radial-gradient(#fff,#fff 28%,transparent 32%)',\n      content: '\"\"',\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#106ba3',\n    },\n  },\n});\n\n// Inspired by blueprintjs\nexport default function RadioButton(props) {\n  const classes = useStyles();\n\n  return (\n    <Radio\n      className={classes.root}\n      disableRipple\n      color=\"default\"\n      checkedIcon={<span className={clsx(classes.icon, classes.checkedIcon)} />}\n      icon={<span className={classes.icon} />}\n      {...props}\n    />\n  );\n}","import React from 'react'\nimport CheckBox from 'components/CheckBox'\nimport RadioButton from 'components/Radio'\nimport FormGroup from '@material-ui/core/FormGroup';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { useRecoilState } from 'recoil'\nimport { layerSelection, modalControls } from 'data/recoil'\nimport { overlaySelection } from 'data/recoil';\n\n\nexport default function FilterGroup({title, group, closePanel}) {\n  const [controls, setControls] = useRecoilState(modalControls)\n  const [layer, setLayer] = useRecoilState(layerSelection);\n  const [overlay, setOverlay] = useRecoilState(overlaySelection);\n  \n  //handler for radio groups\n  const handleLayer = (e) => setLayer(e.target.value);\n\n  //handler for checkboxes\n  const handleChange = (e) => {\n    setControls({ \n      ...controls,\n      [group]: {\n        ...controls[group],\n        [e.target.type]: {\n          ...controls[group][e.target.type],\n          [e.target.name]: e.target.checked\n        }\n      }\n    });\n    if (group === 'layers') {\n      let olyrs = [...overlay]\n      if (e.target.checked) {\n        olyrs.push(e.target.name)\n        setOverlay(olyrs)\n      } else {\n        const fOLyrs = olyrs.filter(val => val !== e.target.name);\n        setOverlay(fOLyrs)\n      }\n    }\n  };  \n\n  return (\n    <div>\n      <h3>{title}</h3>\n      {controls[group].radio\n       ? <RadioGroup value={layer} name={group}> \n          {Object.keys(controls[group].radio).map(lbl => {\n            const val = controls[group].radio[lbl]\n            return <FormControlLabel \n              value={val}\n              key={`filter-modal-radio-${val}`}\n              onChange={handleLayer}\n              onClick={closePanel}\n              control={<RadioButton value={val} />}\n              label={lbl}\n            />\n          })}\n        </RadioGroup>\n        : null\n      }\n      {controls[group].checkbox\n        ? <FormGroup>\n            {Object.keys(controls[group].checkbox).map(lbl => \n              <FormControlLabel\n                key={`filter-modal-checkbox-${lbl}`}\n                control={<CheckBox checked={controls[group].checkbox[lbl]} onChange={handleChange} name={lbl} />}\n                label={lbl}\n              />\n            )}\n          </FormGroup>\n        : null\n      }\n    </div>\n  )\n}\n","import React from 'react'\nimport { FiMenu } from \"react-icons/fi\"\nimport { makeStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Modal from '@material-ui/core/Modal'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport Fade from '@material-ui/core/Fade'\nimport FilterGroup from './FilterModalGroup';\n\nexport default function FilterModal() {\n  const classes = useStyles()\n  const [open, setOpen] = React.useState(false)\n\n  return (\n    <>\n      <Button \n        onClick={() => setOpen(true)}\n        startIcon={<FiMenu className={classes.icon} />}\n        className={classes.button}\n        disableRipple> \n        {'More'}\n      </Button>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        onClose={() => setOpen(false)}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n          <div className={classes.paper}>\n            <h2 id=\"transition-modal-title\">More Selections</h2>\n            <div className=\"modal-filter-cols\">\n              <FilterGroup title=\"Filter Attributes\" group=\"attributes\"/>\n              <div>\n                <FilterGroup title=\"Layers\" group=\"layers\" closePanel={() => setOpen(false)}/>\n                <FilterGroup title=\"Panels\" group=\"panels\"/>\n              </div>\n            </div>\n            <div className=\"modal-filter-footer\">\n              <div>\n                <button>Reset</button>\n                <button onClick={() => setOpen(false)}>Done</button>\n              </div>\n            </div>\n          </div>\n        </Fade>\n      </Modal>\n    </>\n  )\n}\n\nconst useStyles = makeStyles({\n  button: { \n    textAlign: 'center',\n    color: 'var(--grey-unselect)',\n    fontWeight: 600,\n    transition: 'all ease-in-out 0.15s',\n    marginLeft: '-0.8rem',\n    marginBottom: '-0.4rem',\n    '&:hover': {\n      color: 'var(--blue-highlight)',\n      cursor: 'pointer',\n    },\n    '& span': {\n      flexDirection: 'column',\n      alignItems: 'center',\n      margin: 0,\n    },\n  },\n  icon: {\n    fontSize: '1.5rem',    \n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    color: 'var(--black-txt)',\n    minHeight: '70vh',\n    minWidth: '70vw',\n    overflowY: 'hidden',\n    backgroundColor: 'white',\n    boxShadow: 'var(--light-background)',\n    padding: '70px',\n    borderRadius: '5px',\n    border: 'none',\n    position: 'relative',\n    '&:focus': {\n      border: 'none',\n      outline: 'none',\n    },\n    '& h2': {\n      textTransform: 'uppercase',\n    },\n    '& h3': {\n      color: 'var(--blue-highlight)',\n    },\n    '& .modal-filter-cols': {\n      display: 'flex',\n      '& div': {\n        flex: 1,\n      }\n    },\n    '& .modal-filter-footer': {\n      position: 'absolute',\n      right: '5rem',\n      bottom: '5rem',\n      '& button': {\n        color: 'white',\n        marginTop: '20px',\n        marginLeft: '16px',\n        borderRadius: '5px',\n        letterSpacing: '0.75px',\n      },\n      '& button:nth-child(1)': {\n        background: 'var(--blue-highlight)'\n      },\n      '& button:nth-child(2)': {\n        background: '#273246'\n      }\n    }\n  },\n});","import { withStyles } from '@material-ui/core/styles';\nimport Switch from '@material-ui/core/Switch';\n\nconst AntSwitch = withStyles((theme) => ({\n  root: {\n    width: 52,\n    height: 28,\n    padding: 0,\n    display: 'flex',\n  },\n  switchBase: {\n    padding: 2,\n    color: theme.palette.grey[500],\n    '&$checked': {\n      transform: 'translateX(22px)',\n      color: theme.palette.common.white,\n      '& + $track': {\n        opacity: 1,\n        backgroundColor: \"#05BDD9\",\n        borderColor: \"#05BDD9\",\n      },\n    },\n  },\n  thumb: {\n    width: 22,\n    height: 22,\n    margin: 2,\n    boxShadow: 'none',\n  },\n  track: {\n    border: `1px solid ${theme.palette.grey[500]}`,\n    borderRadius: 28 / 2,\n    opacity: 1,\n    backgroundColor: theme.palette.common.white,\n  },\n  checked: {},\n}))(Switch);\n\nexport default AntSwitch;","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AntSwitch from 'components/Switch'\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function Map3DToggle({show3D, handleChange}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      {\"Map View\"}\n      <Typography component=\"div\">\n        <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\n          <Grid item>2D</Grid>\n          <Grid item>\n            <AntSwitch checked={show3D} onChange={handleChange} name=\"show3D\" />\n          </Grid>\n          <Grid item>3D</Grid>\n        </Grid>\n      </Typography>\n    </div>\n  )\n}\n\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    textAlign: 'center',\n    margin: 'auto',\n    color: 'var(--grey-unselect)',\n  },\n}));","import React, { useState } from 'react'\nimport FilterOption from './FilterOption'\nimport FilterModal from './FilterModal'\nimport Map3DToggle from './Filter3DToggle'\n// eslint-disable-next-line\n// import ProfileMenu from './ProfileMenu'\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport default function FilterBar() {\n  const classes = useStyles()\n  const [show3D, set3D] = useState(false);\n  \n  const handleChange = e => set3D(e.target.checked)\n\n  return (\n    <div className={classes.root}>\n        <div className={classes.logo}/>\n        <div className={classes.filters}>\n            <FilterOption name=\"Property\" control=\"dropdown\"/>\n            <FilterOption name=\"Bedrooms\" control=\"dropdown\"/>\n            <FilterOption name=\"Prices\" control=\"dropdown\"/>\n            <FilterModal/>\n            <Map3DToggle show3D={show3D} handleChange={handleChange}/>\n        </div>\n        {/* <ProfileMenu/> */}\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'grid',\n    fontSize: '0.85rem',\n    gridTemplateColumns: 'minmax(150px, 10%) 1fr auto',\n  },\n  logo: {\n    width: '100px',\n    height: '2rem',\n    margin: '1rem',\n    backgroundColor: 'white',\n  },\n  filters: {\n    height: 'auto',\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, 1fr) minmax(2rem,5%) minmax(3rem, 12%)',\n  }\n}))\n","import { withStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nconst iOSBoxShadow =\n  '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\n\nconst IOSSlider = withStyles({\n  root: {\n    color: '#3880ff',\n    height: 2,\n    padding: '15px 0',\n    marginLeft: 12,\n    width: '95%',\n  },\n  thumb: {\n    height: 28,\n    width: 28,\n    backgroundColor: '#fff',\n    boxShadow: iOSBoxShadow,\n    marginTop: -14,\n    marginLeft: -14,\n    '&:focus, &:hover, &$active': {\n      boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        boxShadow: iOSBoxShadow,\n      },\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 12px)',\n    top: -15,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n    },\n  },\n  track: {\n    height: 1,\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5,\n    backgroundColor: '#bfbfbf',\n  },\n  mark: {\n    backgroundColor: '#bfbfbf',\n    height: 20,\n    width: 2,\n    marginTop: -10,\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor',\n  },\n})(Slider);\n\nexport default IOSSlider;","// /* global requestAnimationFrame, cancelAnimationFrame */\nimport React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IOSSlider from 'components/Slider';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Button from '@material-ui/core/IconButton';\nimport { MdPlayArrow, MdPause } from \"react-icons/md\";\nimport { useSetRecoilState } from 'recoil';\nimport { UITxtLoading } from 'data/recoil';\n\nexport default function Timeline({min, max, value, onChange}) {\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  setTxtLoading(\"Loading Timeline...\")\n  const classes = useStyles();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [animation] = useState({});\n\n  const MS_PER_DAY = 8.64e7;\n  const ANIMATION_SPEED = 30;\n  \n  // prettier-ignore\n  useEffect(() => {\n    return () => animation.id && cancelAnimationFrame(animation.id);\n  }, [animation]);\n\n  if (isPlaying && !animation.id) {\n    const span = value[1] - value[0];\n    let nextValueMin = value[0] + (MS_PER_DAY * ANIMATION_SPEED);\n    if (nextValueMin + span >= max) {\n      nextValueMin = min;\n    }\n    animation.id = requestAnimationFrame(() => {\n      animation.id = 0;\n      onChange([nextValueMin, nextValueMin + span]);\n    });\n  }\n\n  const isButtonEnabled = value[0] > min || value[1] < max;\n\n  return (\n    <div className={classes.root}>\n      <Button variant=\"outlined\"  disabled={!isButtonEnabled} onClick={() => setIsPlaying(!isPlaying)}>\n        {isPlaying ? <MdPause title=\"Stop\" /> : <MdPlayArrow title=\"Animate\" />}\n      </Button>\n      <IOSSlider\n        getAriaValueText={valuetext}\n        aria-labelledby=\"ios slider\"\n        className={classes.timeline}\n        // marks={marks}\n        // step={1/12}\n        min={min}\n        max={max}\n        value={value}\n        onChange={(event, newValue) => onChange(newValue)}\n        valueLabelDisplay=\"auto\"\n        valueLabelFormat={formatLabel}\n      />\n    </div>\n  )\n}\n\nexport const getTooltip = ({object}) => {\n  return (\n    object &&\n    `\\\n    Time: ${new Date(object.timestamp).toUTCString()}\n    Magnitude: ${object.magnitude}\n    Depth: ${object.depth}\n    `\n  );\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n    height: '4rem',\n    backgroundColor: 'white',\n    color: 'var(--dark-background)',\n    display: 'grid',\n    gridTemplateColumns: 'minmax(50px, 5%) auto',\n    textAlign: 'center',\n    borderTop: '1px var(--grey-border) solid',\n    overflow: 'auto',\n    overflowY: 'hidden',\n    '&>*': {\n      margin: 'auto 0',\n    }, \n    '& button': {\n      position: 'sticky',\n      left: '1rem',\n      zIndex: 3,\n      border: '0.1rem solid var(--dark-highlight)',\n      borderRadius: '50%',\n      height: '2.5rem',\n      width: '2.5rem',\n      margin: '0.5rem 1.5rem',\n      color: 'var(--dark-highlight)',\n      fontSize: '10rem',\n      padding: '0.3rem'\n    },\n    '& button:hover': {\n      color: 'var(--blue-highlight)',\n    },\n    '& button::after': {\n      content: 'close-quote',\n      width: '200%',\n      height: '200%',\n      position: 'absolute',\n      zIndex: -1,\n      backgroundColor: 'white',\n    },\n    '& button::before': {\n      content: 'close-quote',\n      position: 'absolute',\n      borderRadius: '50%',\n      height: '2.4rem',\n      width: '2.4rem',\n      border: '0.1rem solid var(--dark-highlight)',\n    },\n    '& button:hover::before': {\n      border: '0.1rem solid var(--blue-highlight)',\n    },\n    '& button:disabled::before': {\n      border: '0.1rem solid rgba(0, 0, 0, 0.26)',\n    },\n  },\n  timeline: {\n    zIndex: 2,\n    margin: 'auto 1rem',\n  }\n}));\n\n\nfunction ValueLabelComponent(props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n}\n\nValueLabelComponent.propTypes = {\n  children: PropTypes.element.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nfunction formatLabel(t) {\n  const date = new Date(t);\n  return `${date.getUTCFullYear()}/${date.getUTCMonth() + 1}`;\n}\n\nexport function getTimeRange(data) {\n  if (!data) {\n    return null;\n  }\n  // console.log(data)\n  return data?.reduce(\n    (range, d) => {\n      const t = d.timestamp;\n      range[0] = Math.min(range[0], t);\n      range[1] = Math.max(range[1], t);\n      return range;\n    },\n    [Infinity, -Infinity]\n  );\n}","import React from 'react'\nimport { FiMap, FiBarChart2, FiChevronUp, FiMenu, FiBookmark, FiSettings } from \"react-icons/fi\";\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport default function TabBar() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <button className={classes.item}> <FiMap/> Map </button>\n      <button className={classes.item}> <FiBarChart2/> Charts </button>\n\n      <button className={classes.pull}>\n        <FiChevronUp />\n        <br />\n        <FiMenu />\n      </button>\n\n      <button className={classes.item}> <FiBookmark/> Highlights </button>\n      <button className={classes.item}> <FiSettings /> Settings </button>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    height: '3.8rem',\n    backgroundColor: 'white',\n  },\n  item: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '0.8rem',\n    border: 'none',\n    backgroundColor: 'white',\n    '& svg': {\n      fontSize: '1.5rem',\n      margin: '0.5rem 0.1rem',\n    }\n  },\n  pull: {\n    flex: 0.5,\n    position: 'relative',\n    bottom: '2rem',\n    border: 'none',\n    borderRadius: '15px',\n    backgroundColor: 'white',\n    boxShadow: '6px 10px 35px 0px rgba(225,225,225,0.5)',\n    '& svg:nth-child(3)': {\n      fontSize: '1.2rem',\n    }\n  }\n}));\n","import React, { useState, useMemo } from 'react';\nimport MapboxGLMap from 'layouts/common/Map'\nimport FilterPills from 'layouts/mobile/FilterPills'\nimport FilterBar from 'layouts/desktop/FilterBar';\nimport Timeline, { getTimeRange } from 'layouts/desktop/Timeline'\nimport TabBar from 'layouts/mobile/TabBar';\nimport { useMediaQuery } from 'react-responsive'\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSetRecoilState, useRecoilValue } from 'recoil';\nimport { resaleData, UITxtLoading } from 'data/recoil';\n\n\nexport default function App() {\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  setTxtLoading(\"Loading Application...\")\n  const classes = useStyles()\n  const isMobile = useMediaQuery({ maxWidth: 767, orientation: \"portrait\"})\n  const data = useRecoilValue(resaleData)\n\n  const [filter, setFilter] = useState(null)\n\n  const timeRange = useMemo(() =>  getTimeRange(data), [data]);\n  const filterValue = filter || timeRange;\n\n  return (\n    <>\n      {data && (\n        <div className={classes.App}>\n          { !isMobile && <div className=\"section header\"> <FilterBar /> </div>}\n          <main className=\"content\">\n            <MapboxGLMap filterValue={filterValue}/>\n            {isMobile && <FilterPills/>}\n          </main>\n          <footer className=\"footer\" >\n            { isMobile ? <TabBar/> : (timeRange && (\n              <Timeline \n                min={timeRange[0]}\n                max={timeRange[1]}\n                value={filterValue}\n                onChange={setFilter}\n              />\n            ))}\n          </footer>\n        </div>\n      )}\n    </>\n  );\n}\n\nconst useStyles = makeStyles(() => ({\n  App: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    height: '100%',\n    '& .section': { fontSize: '1rem' },\n    '& .header, & .footer': {\n      flex: '1',\n      height: '100%',\n      width: '100%',\n      background: 'var(--dark-background)',\n      zIndex: 1,\n    },\n    '& .footer': { zIndex: 1, },\n    '& .content': { flex: 20, },\n  }\n}));","import React from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\n// import CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRecoilValue } from 'recoil';\nimport { UITxtLoading } from 'data/recoil';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: 'var(--blue-highlight)',\n    background: 'white'\n  },\n}));\n\nexport default function BackDrop({open}) {\n  const txtLoading = useRecoilValue(UITxtLoading)\n  const classes = useStyles();\n\n  return (\n    <div>\n      <Backdrop className={classes.backdrop} open={open}>\n        {/* <CircularProgress color=\"inherit\" /> */}\n        <h1>{txtLoading}</h1>\n        {/* {console.log(txtLoading)} */}\n      </Backdrop>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/resale1990_2020onwards.3e108b0b.csv\";","export default __webpack_public_path__ + \"static/media/borders.e3d1a48e.geojson\";","import React from 'react'\nimport App from \"./App\"\nimport BackDrop from 'components/BackDrop'\n\n// Data \nimport * as d3 from 'd3-fetch'\nimport resales from 'data/resale1990_2020onwards.csv'\nimport borders from 'data/borders.geojson'\nimport { useSetRecoilState, useRecoilValue } from 'recoil';\nimport { resaleData, borderData, UILoading, UITxtLoading } from 'data/recoil'\n\nexport default function InitData() {\n  const loading = useRecoilValue(UILoading)\n  const setTxtLoading = useSetRecoilState(UITxtLoading)\n  const setResale = useSetRecoilState(resaleData)\n  const setBorder = useSetRecoilState(borderData)\n\n  d3.csv(resales).then(res => {\n    if (res) {\n      const data = res.map(row => ({\n        timestamp: new Date(`${row.month}`).getTime(),\n        latitude: Number(row.latitude),\n        longitude: Number(row.longitude),\n        resale_price: Number(row.resale_price),\n        floor_area_sqm: Number(row.floor_area_sqm)\n      }));\n      setTxtLoading(\"Loading 100,000 Data Points...\")\n      setResale(data)\n\n      d3.json(borders).then(data => {\n        setBorder(data)\n        setTxtLoading(\"90%\")\n      });\n    }\n  })\n\n  return (\n    <>\n      {loading && <BackDrop open={true}/>}\n      <App/>\n    </>\n  )\n}\n","// Framework\nimport React from 'react';\n\n//Routing\nimport { render } from 'react-dom';\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { RecoilRoot } from 'recoil'\n\nimport InitData from 'pages/InitData'\nimport './index.css';\n\nconst hist = createBrowserHistory();\n      \nrender(\n  // <React.StrictMode>\n    <RecoilRoot>\n      <Router history={hist}>\n        <Switch>\n          <Route\n            path=\"/\"\n            render={props => {\n              return <InitData {...props}/>;\n            }}\n          />\n          <Route render={() => <Redirect to=\"/\" />} />\n        </Switch>\n      </Router>\n    </RecoilRoot> \n  // </React.StrictMode>,\n  ,document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}